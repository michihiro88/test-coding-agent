# Python AI Coding Agent

これはGo言語版AI Coding Agentを元に作られたPython版です。

## 機能
このAI Coding Agentは、以下のツールを使用してコーディングタスクを支援します：

- **ListFile**: ディレクトリ内のファイル一覧を取得
- **ReadFile**: ファイルの内容を読み取る
- **WriteFile**: ファイルに内容を書き込む
- **AskQuestion**: ユーザーに質問する
- **ExecuteCommand**: コマンドを実行する
- **Complete**: タスクの完了を示す

また、以下の機能も備えています：

- **ロギング機能**: AIとの通信内容を日付別のJSONLファイルとして保存
- **エラーハンドリング**: AIがツールを使用しない場合に適切なガイダンスを提供

## セットアップ

### 1. 必要な環境
- Python 3.7以上
- OpenAI APIキー
- Windows環境（PowerShellでの実行を前提としています）

### 2. インストール方法
1. リポジトリをクローンまたはダウンロードする
2. 必要なパッケージをインストールする
```powershell
pip install -r requirements.txt
```

### 3. 環境変数の設定
OpenAI APIキーを環境変数として設定します：

```powershell
$env:OPENAI_API_KEY = "your-api-key"
```

## 使用方法

1. メインプログラムを実行する
```powershell
python main.py
```

2. プロンプトが表示されたら、コーディングエージェントに実行してほしいタスクを入力します。

3. AIエージェントがタスクを理解し、必要なツールを使用して作業を進めます。

## ログ機能

エージェントの実行中に、以下の情報が自動的に記録されます：

- 送信されたメッセージ（タイプ: "request"）
- 受信したAIの応答（タイプ: "response"）
- ツールの実行結果（タイプ: "tool_result"）

ログファイルは `logs` ディレクトリ内に日付別（YYYYMMDD形式）で保存され、各行はJSONL形式で記録されます。
例: `logs/agent_log_20250329.jsonl`

## 依存パッケージ
- openai >= 1.0.0, < 2.0.0：OpenAI APIとの通信に使用

## 注意事項
- ExecuteCommandツールはデフォルトでユーザー承認を求めます。
- APIキーは環境変数として設定してください。コード内に直接記述しないでください。
- 文字コードはutf-8を使用しています。
- Windows PowerShell環境での実行を前提としています。他の環境で実行する場合は、tool.pyのexecute_command関数を適宜修正してください。
- AIがツールを使用せず直接回答した場合は自動的にエラーを返し、適切なツール使用を促します。

## 改善ポイント
- AIのレスポンスが不適切な場合（ツールを使用していない場合など）は、明確なエラーメッセージを返して修正を促しています。
- 温度パラメータが低めに設定されているため、AIの応答はより決定論的で一貫性があります。
- 複雑なタスクの場合は、AIが最初にAskQuestionツールを使用して詳細を確認するよう促しています。

## ライセンス
このプロジェクトはMITライセンスの下で公開されています。 